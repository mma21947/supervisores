{% extends 'usuarios/base.html' %}

{% block title %}{{ titulo }}{% endblock %}

{% block content %}
<div class="row justify-content-center">
    <div class="col-md-10">
        <div class="card">
            <div class="card-header">
                <h3 class="text-center">{{ titulo }}</h3>
                {% if funcionario %}
                    <p class="text-center mb-0">Usuário: {{ funcionario.usuario.nome_completo }}</p>
                {% else %}
                    <p class="text-center mb-0">Supervisor: {{ usuario.nome_completo }}</p>
                {% endif %}
            </div>
            <div class="card-body">
                <form method="post">
                    {% csrf_token %}
                    
                    <!-- Informações Básicas -->
                    <div class="card mb-3">
                        <div class="card-header bg-light">
                            <h5 class="mb-0">Informações Básicas</h5>
                        </div>
                        <div class="card-body">
                            <div class="row">
                                <div class="col-md-4">
                                    <div class="mb-3">
                                        <label for="{{ form.codigo.id_for_label }}" class="form-label">{{ form.codigo.label }}</label>
                                        {{ form.codigo }}
                                        {% if form.codigo.errors %}
                                            {% for error in form.codigo.errors %}
                                                <div class="text-danger">{{ error }}</div>
                                            {% endfor %}
                                        {% endif %}
                                    </div>
                                </div>
                                <div class="col-md-8">
                                    <div class="mb-3">
                                        <label for="{{ form.nome_funcionario.id_for_label }}" class="form-label">{{ form.nome_funcionario.label }}</label>
                                        {{ form.nome_funcionario }}
                                        {% if form.nome_funcionario.errors %}
                                            {% for error in form.nome_funcionario.errors %}
                                                <div class="text-danger">{{ error }}</div>
                                            {% endfor %}
                                        {% endif %}
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label for="{{ form.nome_empresa.id_for_label }}" class="form-label">{{ form.nome_empresa.label }}</label>
                                        {{ form.nome_empresa }}
                                        {% if form.nome_empresa.errors %}
                                            {% for error in form.nome_empresa.errors %}
                                                <div class="text-danger">{{ error }}</div>
                                            {% endfor %}
                                        {% endif %}
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label for="{{ form.data_admissao.id_for_label }}" class="form-label">{{ form.data_admissao.label }}</label>
                                        {{ form.data_admissao }}
                                        {% if form.data_admissao.errors %}
                                            {% for error in form.data_admissao.errors %}
                                                <div class="text-danger">{{ error }}</div>
                                            {% endfor %}
                                        {% endif %}
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Informações do Cargo -->
                    <div class="card mb-3">
                        <div class="card-header bg-light">
                            <h5 class="mb-0">Informações do Cargo</h5>
                        </div>
                        <div class="card-body">
                            <div class="row">
                                <div class="col-md-4">
                                    <div class="mb-3">
                                        <label for="{{ form.codigo_categoria.id_for_label }}" class="form-label">{{ form.codigo_categoria.label }}</label>
                                        {{ form.codigo_categoria }}
                                        {% if form.codigo_categoria.errors %}
                                            {% for error in form.codigo_categoria.errors %}
                                                <div class="text-danger">{{ error }}</div>
                                            {% endfor %}
                                        {% endif %}
                                    </div>
                                </div>
                                <div class="col-md-8">
                                    <div class="mb-3">
                                        <label for="{{ form.categoria.id_for_label }}" class="form-label">{{ form.categoria.label }}</label>
                                        {{ form.categoria }}
                                        {% if form.categoria.errors %}
                                            {% for error in form.categoria.errors %}
                                                <div class="text-danger">{{ error }}</div>
                                            {% endfor %}
                                        {% endif %}
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-4">
                                    <div class="mb-3">
                                        <label for="{{ form.departamento.id_for_label }}" class="form-label">{{ form.departamento.label }}</label>
                                        {{ form.departamento }}
                                        {% if form.departamento.errors %}
                                            {% for error in form.departamento.errors %}
                                                <div class="text-danger">{{ error }}</div>
                                            {% endfor %}
                                        {% endif %}
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="mb-3">
                                        <label for="{{ form.setor.id_for_label }}" class="form-label">{{ form.setor.label }}</label>
                                        {{ form.setor }}
                                        {% if form.setor.errors %}
                                            {% for error in form.setor.errors %}
                                                <div class="text-danger">{{ error }}</div>
                                            {% endfor %}
                                        {% endif %}
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="mb-3">
                                        <label for="{{ form.funcao.id_for_label }}" class="form-label">{{ form.funcao.label }}</label>
                                        {{ form.funcao }}
                                        {% if form.funcao.errors %}
                                            {% for error in form.funcao.errors %}
                                                <div class="text-danger">{{ error }}</div>
                                            {% endfor %}
                                        {% endif %}
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Informações Complementares -->
                    <div class="card mb-3">
                        <div class="card-header bg-light">
                            <h5 class="mb-0">Informações Complementares</h5>
                        </div>
                        <div class="card-body">
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label for="{{ form.horario.id_for_label }}" class="form-label">{{ form.horario.label }}</label>
                                        {{ form.horario }}
                                        {% if form.horario.errors %}
                                            {% for error in form.horario.errors %}
                                                <div class="text-danger">{{ error }}</div>
                                            {% endfor %}
                                        {% endif %}
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label for="{{ form.salario.id_for_label }}" class="form-label">{{ form.salario.label }}</label>
                                        {{ form.salario }}
                                        {% if form.salario.errors %}
                                            {% for error in form.salario.errors %}
                                                <div class="text-danger">{{ error }}</div>
                                            {% endfor %}
                                        {% endif %}
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-12">
                                    <div class="form-check">
                                        {{ form.ativo }}
                                        <label class="form-check-label" for="{{ form.ativo.id_for_label }}">
                                            {{ form.ativo.label }}
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="d-grid gap-2">
                        <button type="submit" class="btn btn-primary">Salvar</button>
                        {% if funcionario %}
                            <a href="{% url 'lista_funcionarios' funcionario.usuario.id %}" class="btn btn-secondary">Cancelar</a>
                        {% else %}
                            <a href="{% url 'lista_funcionarios' usuario.id %}" class="btn btn-secondary">Cancelar</a>
                        {% endif %}
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
{% endblock %} 